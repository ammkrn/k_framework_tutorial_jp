# 選択的正格評価・無名変数

[元講座動画 [2'14"]](http://youtu.be/IreP6DFPWdk)

このレッスンで、無名変数の使い方も言語構造に対して「選択的正格さ」つまり、正格評価を特定の引数に当て嵌める方法を調べます。

最初に、前回といったように引数を三つ受け取る `if` 文を定義しましょう。望みの行動はまず最初の引数を評価して、結果が「真」になったら二番目の引数を評価して返す、「偽」になったら三番目の引数を評価して返すことです。`strict` アトリビュートはどれの引数に対して当てはまることを調整するため、引数の位置が入って要るリストを `strict` に渡します。例えば `if` 文の行動と調整されたアトリビュートはこのように実装できます：

```
    syntax Exp ::= "if" Exp "then" Exp "else" Exp   [strict(1)]
```

`strict` アトリビュートへ(1)しか入ってないリストが渡されるので一番目の引数が正格的に評価されます。これを正格評価の定義と組んだら `if` 文の行動を支配する規則が有効になる前、最初の引数がすでに「値・結果」まで評価されますね。だから `if` 文の意味論規則はすごく簡単になります：

```
    rule if true  then E else _ => E
    rule if false then _ else E => E
```

「穴」とも言われる `_` 記号は k の無名変数を表す記号です。無名変数「ここに何か存在していますが、その物はなんですかって構いません」ということを伝える概念です。無名変数は普通の変数と同じように扱われますが、特別なところが二つあります：

1. 無名変数はソートがを持ちません
2. 各々の無名変数は一意的な物とみなされます。

さて、`lambda.k` をコンパイルして、完成した if 文を使って見ましょう。

```
    if 2<=1 then 3/0 else 10
```

というようなプログラムはちゃんと0割を避けて、`10` になります。

次回は関数プログラミング言語でよく見える `let` と `letrect` 構造を導入していきます。
