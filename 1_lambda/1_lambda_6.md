# 選択的性格評価と無名変数

[元講座動画 [2'14"]](http://youtu.be/IreP6DFPWdk)

今回、言語構造対、選択的性格さを定義することを調べていきます。つまり、ある構造は特定の評価だけに性格評価を使うってことです。無名変数の使い方も学びます。

最初に、引数を三つ受け取る`if`文を定義しましょう。望みの行動はまず第一引数を評価して、その結果が「真」なら二番目の引数を評価して返す、「偽」なら三番目の引数を評価して返すことです。`strict`アトリビュートはどれの引数に対して適用されることを調整するため、目標にしたい引数の位置入りのリストを`strict`に渡します。例えば`if`文の行動は以下のように実装されます。

```
    syntax Exp ::= "if" Exp "then" Exp "else" Exp   [strict(1)]
```

`strict`アトリビュートへ(1)しか入ってないリストが渡されるので、第一引数が性格的に評価されます。

`if`文の第一引数は「値」まで評価されることを上の定義から推論できるので、`if`文の行動の残りは以下の二つのルールで完成できます。

```
    rule if true  then E else _ => E
    rule if false then _ else E => E
```

`_`はkの無名変数を表す記号です。無名変数「何かがここに存在していますが、その物はなんですかって構いません」ということを伝えるために使用します。無名変数は普通の変数と同じように扱われますが、特別なところが二つあって：

1. 無名変数はソートがない。
2. 各々の無名変数は一意的なものです。

二番目の特徴と伴って、同じ規則に`_`を何回使っても、各`_`は別々の一意的な物としてみなされます。

さて、`lambda.k`をコンパイルして、完成したif文を使って見てください。

例えば
```
    if 2<=1 then 3/0 else 10
```

はちゃんと0割を避けて、必ず`10`に評価されます。

次回は、関数プログラミング言語でよく見える`let`と`letrect`構造を導入していきます。
